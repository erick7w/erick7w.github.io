<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>elasticsearch基本概念</title>
    <link href="/2022/11/05/elasticsearch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/2022/11/05/elasticsearch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>k8s-学习环境搭建</title>
    <link href="/2022/05/20/k8s-01/"/>
    <url>/2022/05/20/k8s-01/</url>
    
    <content type="html"><![CDATA[<h2 id="1-配置服务器环境"><a href="#1-配置服务器环境" class="headerlink" title="1.配置服务器环境"></a>1.配置服务器环境</h2><h3 id="1-1-将节点加入本地hosts文件"><a href="#1-1-将节点加入本地hosts文件" class="headerlink" title="1.1 将节点加入本地hosts文件"></a>1.1 将节点加入本地hosts文件</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">vi /etc/hosts<br><br><span class="hljs-number">172.16.148.160</span> master<br><span class="hljs-number">172.16.148.161</span> node1<br><span class="hljs-number">172.16.148.162</span> node2<br></code></pre></td></tr></table></figure><h3 id="1-2-关闭防火墙（非生产环境）"><a href="#1-2-关闭防火墙（非生产环境）" class="headerlink" title="1.2 关闭防火墙（非生产环境）"></a>1.2 关闭防火墙（非生产环境）</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gauss">systemctl <span class="hljs-keyword">stop</span> firewalld<br>systemctl <span class="hljs-keyword">disable</span> firewalld<br></code></pre></td></tr></table></figure><h3 id="1-3-关闭安全增强型-Linux"><a href="#1-3-关闭安全增强型-Linux" class="headerlink" title="1.3 关闭安全增强型 Linux"></a>1.3 关闭安全增强型 Linux</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vi /etc/selinux<span class="hljs-built_in">/config</span><br><span class="hljs-built_in"></span><br><span class="hljs-attribute">SELINUX</span>=disabled<br></code></pre></td></tr></table></figure><h3 id="1-4-禁用swap分区"><a href="#1-4-禁用swap分区" class="headerlink" title="1.4 禁用swap分区"></a>1.4 禁用swap分区</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">vi <span class="hljs-regexp">/etc/</span>fstab <br><br><span class="hljs-comment"># 注释这行</span><br><span class="hljs-comment">#/dev/mapper/centos-swap swap                    swap    defaults        0 0 </span><br></code></pre></td></tr></table></figure><h3 id="1-5-修改linux内核参数"><a href="#1-5-修改linux内核参数" class="headerlink" title="1.5 修改linux内核参数"></a>1.5 修改linux内核参数</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">vi</span> /etc/sysctl.d/kubernetes.conf<br><span class="hljs-comment"># 添加下面内容</span><br><span class="hljs-attribute">net</span>.bridge.bridge-nf-call-ip6tables = <span class="hljs-number">1</span><br><span class="hljs-attribute">net</span>.bridge.bridge-nf-call-iptables = <span class="hljs-number">1</span><br><span class="hljs-attribute">net</span>.ipv4.ip_forward = <span class="hljs-number">1</span><br><span class="hljs-attribute">vm</span>.swappiness = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># 加载网桥过滤模块</span><br><span class="hljs-attribute">modprobe</span> br_netfilter<br><br><span class="hljs-comment"># 查看网桥过滤模块是否加载成功</span><br><span class="hljs-attribute">lsmod</span> | grep br_netfilter<br><br><span class="hljs-comment"># 生效</span><br><span class="hljs-attribute">sysctl</span> --system<br></code></pre></td></tr></table></figure><h3 id="1-6-配置ipvs功能"><a href="#1-6-配置ipvs功能" class="headerlink" title="1.6 配置ipvs功能"></a>1.6 配置ipvs功能</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk">yum install ipset ipvsadmin -y<br><br>cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules &lt;&lt;EOF<br><span class="hljs-comment">#!/bin/bash</span><br>modprobe -- ip_vs<br>modprobe -- ip_vs_rr<br>modprobe -- ip_vs_wrr<br>modprobe -- ip_vs_sh<br>modprobe -- nf_conntrack_ipv4<br>EOF<br><br><span class="hljs-comment"># 添加执行权限</span><br>chmod +x <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules <br><br><span class="hljs-comment"># 执行脚本文件</span><br><span class="hljs-regexp">/bin/</span>bash <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules<br><br><span class="hljs-comment"># 验证模块是否成功开启</span><br>lsmod | grep -e ip_vs -e nf_conntrack_ipv4<br></code></pre></td></tr></table></figure><h3 id="1-7-重启"><a href="#1-7-重启" class="headerlink" title="1.7 重启"></a>1.7 重启</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">reboot</span><br></code></pre></td></tr></table></figure><h2 id="2-集群环境搭建"><a href="#2-集群环境搭建" class="headerlink" title="2.集群环境搭建"></a>2.集群环境搭建</h2>]]></content>
    
    
    <categories>
      
      <category>k8s</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
